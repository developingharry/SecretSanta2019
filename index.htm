<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <!-- favicon links -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- end of favicon links -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="css/main.css"> -->
    <link rel="stylesheet" href="css/temp.css">
    <title>Secret Santa Maker</title>
  </head>

  <body class = "bg">

    <div class="container" id="instructions">
        <div data-bind="visible: !secretData()" class = "row">
            <div class = "col">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Secret Santa Generator</h5>
                        <p class="card-text">To set up a Secret Santa event for your office/apartment/club:</p>
                    </div>
                    <ol class="list-group list-group-flush">
                        <li class="list-group-item">1. Set a max spend (eg. £5)</li>
                        <li class="list-group-item">2. Decide if you want to see who got who, or join in!</li>
                        <li class="list-group-item">3. Start adding Santas!</li>
                        <li class="list-group-item">4. Press FINISHED when done.</li>
                    </ol>
                    <div class="card-body">
                    <!-- inline jQuery used here instead of knockout, to avoid conflict between bootstrap and knockout -->
                        <button type="button" class="btn btn-primary" data-bind="click: hideInstructions">Get Started</button>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- shows main page if this isn't a bespoke URL sent to participants, otherwise shows "secret" page -->

<div data-bind="visible: !secretData() && instructionsHidden">
    <form class="container entryform">
        <h2 class="entryformtitle">Santa Entry Form</h2>
        <div class ="form-group row">
            <div class="input-group mb-3 col">
                <div class="input-group-prepend">
                    <span class="input-group-text" id="basic-addon1">Max Spend:</span>
                </div>
                <input type="text" class="form-control" placeholder="(eg. £5)" aria-label="Username" aria-describedby="basic-addon1" data-bind="textInput: ViewModel.santaBudget">
            </div>
        </div>





      <fieldset class="form-group">
        <div class="row">
            <div class="col-sm-10">
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="resultsoptions" id="gridRadios1" value="showResults" data-bind="checked: resultsOption" checked>
                  <label class="form-check-label" for="gridRadios1">
                    Reveal the results
                  </label>
                </div>
                <div class="form-check">
                  <input class="form-check-input" type="radio" name="resultsoptions" id="gridRadios2" value="hideResults" data-bind="checked: resultsOption">
                  <label class="form-check-label" for="gridRadios2">
                    Hide the results
                  </label>
                </div>
            </div>
        </div>
      </fieldset>

      <legend>Santas:</legend>
      <!-- ko foreach: santas -->
        <span class = "row">
                <section class="input-group col">
                    <input  type="text"
                            class="form-control"
                            placeholder="Enter a Name Here"
                            aria-label="Enter a Name Here"
                            aria-describedby="button-addon2"
                            data-bind="textInput : name, event: { keyup: enterCheck }, hasFocus: true" required>
                    <div class="input-group-btn">
                        <div class="input-group-append">
                            <span class="input-group-text" id="basic-addon2" data-bind="click: $root.removeSanta">X</span>
                        </div>
                    </div>
                </section>
            </span>        
      <!-- /ko -->




        <div class="form-group row">
            <span class="col">
                <!-- ko if: !anyErrors() -->
                <button type="button" class="btn input-group-text" id="addSantaButton" data-bind="click: addSanta">+</button>
                <!-- /ko -->
            </span>
            <span class="col">
                <!-- nb: the inline style & visibility data-bind is the best way I've found to preload DOM elements without flickering. -->
                <!-- ko if: santas().length > 1 && !anyErrors() -->
                <button type="button" class="btn btn-success" style="display: none" data-bind="visible: true, click: assignGiftees">FINISHED</button>
                <!-- /ko -->
            </span>
        </div>
    </form>
</div>













































    <!-- Pop-up contents, displayed dependent on radio button choice by user. -->
    <section id="showResultsDialog" style="display: none" data-bind="visible:true" class="container">
        <!-- ko if: finished() && resultsOption() == 'showResults' -->
        <section class="row">
            <span data-bind="foreach:santas" class="col">
                            <span data-bind="text: name() + (' will be buying for ') + giftee()" class = "col"></span><br>
            </span>
        </section>
        <!-- /ko -->
        <!-- ko if: finished() && resultsOption() == 'hideResults' -->
        <span class="row">
            <span class="col">Please give the following links to each giftee.  You can copy them to the clipboard just by clicking!</span>
        </span>
        

        <section class="row">
            <span data-bind="foreach: santas" class="col">
                <button type="button" class="secretUrl btn btn-primary btn-lg btn-block" data-bind="attr: {id: $index},
                                                text:'Click here to copy ' + name() + '\'s link', 
                                                click: function(data, event) { copyUrl(secretUrl(), event) }">Hello</button>
            </span>
        </section>
        <!-- /ko -->
    </section>
    <!-- End of pop-up contents -->



    <!-- to be displayed if this is a user visiting the site from a secret link, sent by the original user. -->
    <!-- ko if: secretData() -->
    <div class="container-fluid">
        <section id="secretPage" class="row bg" style="display: none" data-bind="visible:true">
            <span class="col">
                <h2>Hey <span data-bind="text: santaData()"></span>! Your Secret Santa target is <span data-bind="text: gifteeData()"></span>, and the budget is <span data-bind="text: showBudget()"></span>!<br>Merry Xmas!</h2>
            </span>
        </section>
    </div>
    <!-- /ko -->

    <!-- js scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
    <!-- my main js -->
    <script src="js/app.js"></script>

  </body>
</html>

<!-- Public Domain Santa Photo by bruce mars from Pexels -->
<!-- Main background Photo by rawpixel.com from Pexels -->
