<!doctype html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <!-- favicon links -->
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <!-- end of favicon links -->
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="css/main.css"> -->
    <link rel="stylesheet" href="css/temp.css">
    <title>Secret Santa Maker</title>
  </head>

  <body class = "bg">

    <div class="container">
        <div data-bind="visible: !secretData()" class = "row" id="instructions">
            <div class = "col">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Secret Santa Generator</h5>
                        <p class="card-text">To set up a Secret Santa event for your office/apartment/club:</p>
                    </div>
                    <ol class="list-group list-group-flush">
                        <li class="list-group-item">1. Set a max spend (eg. £5)</li>
                        <li class="list-group-item">2. Decide if you want to see who got who, or join in!</li>
                        <li class="list-group-item">3. Start adding Santas!</li>
                        <li class="list-group-item">4. Press FINISHED when done.</li>
                    </ol>
                    <div class="card-body">
                    <!-- inline jQuery used here instead of knockout, to avoid conflict between bootstrap and knockout -->
                        <button type="button" class="btn btn-primary" data-bind="click: hideInstructions">Get Started</button>
                    </div>
                </div>
            </div>
        </div>
    </div>




    <!-- shows main page if this isn't a bespoke URL sent to participants, otherwise shows "secret" page -->
    <main data-bind="visible: !secretData() && instructionsHidden" class="container">
        <section class="row">
            <div class="col input-group">
                <p>Max Spend (eg.£5):<input class="form-control" data-bind="textInput: ViewModel.santaBudget" size="9"></p>
                <span class="btn-group btn-group-toggle">
                <label class="btn btn-secondary active">
                    <input type="radio" name="resultsoptions" value="showResults" data-bind="checked: resultsOption" checked>Reveal the results
                </label>
                <label class="btn btn-secondary">
                    <input type="radio" name="resultsoptions" value="hideResults" data-bind="checked: resultsOption">Hide the results
                </label>
                </span>
            </div>
        </section>

        <div data-bind="foreach:santas">
            <span class="input-group">
                                <input  type="text"
                        class="form-control"
                        placeholder="Participant name"
                        aria-label="Participant name"
                        aria-describedby="button-addon2"
                        data-bind="textInput : name, event: { keyup: enterCheck }, hasFocus: true" required>
                <div class="input-group-btn">
                    <button class="btn btn-outline-secondary" type="button" id="button-addon2" data-bind="click: $root.removeSanta">X</button>
                </div>
            </span>
        </div>

        <section class="row">
            <span class="col">
                <!-- ko if: !anyErrors() -->
                <button type="button" class="btn btn-primary" id="addSantaButton" data-bind="click: addSanta">Add another Santa</button>
                <!-- /ko -->
                <!-- nb: the inline style & visibility data-bind is the best way I've found to preload DOM elements without flickering. -->
                <!-- ko if: santas().length > 1 && !anyErrors() -->
                <button type="button" class="btn btn-success" style="display: none" data-bind="visible: true, click: assignGiftees">FINISHED</button>
                <!-- /ko -->
            </span>

        </section>
        <!--<section class = "row">
            <footer class="col">
                <div>NB. It may please you to hear that NONE of your details (email, names etc) are stored by this website.  As soon as you've gone, I'll have forgotten who you are!  (don't take it personally, and don't worry, the site will still work!)</div>
            </footer>
        </section> -->
    </main>





    <!-- Pop-up contents, displayed dependent on radio button choice by user. -->
    <section id="showResultsDialog" style="display: none" data-bind="visible:true" class="container">
        <!-- ko if: finished() && resultsOption() == 'showResults' -->
        <section class="row">
            <span data-bind="foreach:santas" class="col">
                            <span data-bind="text: name() + (' will be buying for ') + giftee()" class = "col"></span><br>
            </span>
        </section>
        <!-- /ko -->
        <!-- ko if: finished() && resultsOption() == 'hideResults' -->
        <span class="row">
            <span class="col">Please give the following links to each giftee.  You can copy them to the clipboard just by clicking!</span>
        </span>
        

        <section class="row">
            <span data-bind="foreach: santas" class="col">
                <button type="button" class="secretUrl btn btn-primary btn-lg btn-block" data-bind="attr: {id: $index},
                                                text:'Click here to copy ' + name() + '\'s link', 
                                                click: function(data, event) { copyUrl(secretUrl(), event) }">Hello</button>
            </span>
        </section>
        <!-- /ko -->
    </section>
    <!-- End of pop-up contents -->



    <!-- to be displayed if this is a user visiting the site from a secret link, sent by the original user. -->
    <!-- ko if: secretData() -->
    <div class="container-fluid">
        <section id="secretPage" class="row bg" style="display: none" data-bind="visible:true">
            <span class="col">
                <h1 class="display-4 secretMessage speech-bubble">Hey <span data-bind="text: santaData()"></span>! Your Secret Santa target is <span data-bind="text: gifteeData()"></span>, and the budget is <span data-bind="text: showBudget()"></span>!<br>Merry Xmas!</h1>
            </span>
        </section>
    </div>
    <!-- /ko -->

    <!-- js scripts -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
    <!-- my main js -->
    <script src="js/app.js"></script>

  </body>
</html>

<!-- Public Domain Santa Photo by bruce mars from Pexels -->
<!-- Main background Photo by rawpixel.com from Pexels -->
